- hosts: all
  pre_tasks:
    # XXX java.net.InetAddress.getLocalHost throws an exception without this
    - shell: echo "127.0.0.1 localhost {{ ansible_hostname }}" > /etc/hosts
      changed_when: False
  roles:
    - ansible-role-hadoop-namenode
  vars:
    hadoop_config:
      core_site:
        - 
          - name: fs.defaultFS
          - value: 'hdfs://localhost/'
        -
          - name: hadoop.tmp.dir
          - value: /var/db/hadoop
        -
          - name: io.file.buffer.size
          - value: 131072
      hdfs_site:
        -
          - name: dfs.namenode.name.dir
          - value: "${hadoop.tmp.dir}/dfs/name"
        - 
          - name: dfs.blocksize
          - value: 268435456
        -
          - name: dfs.namenode.handler.count 
          - value: 100
        -
          - name: dfs.datanode.data.dir
          - value: "${hadoop.tmp.dir}/dfs/data"
      yarn-site:
        -
          - name: yarn.acl.enable
          - value: false
        -
          - name: yarn.admin.acl
          - value: "*"
        -
          - name: yarn.log-aggregation-enable
          - value: false
      mapred_site:
        -
          - name: mapreduce.framework.name
          - value: local
        -
          - name: mapreduce.map.java.opts
          - value: "-Xmx512M"
